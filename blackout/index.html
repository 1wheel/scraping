<!DOCTYPE html>
<meta charset="utf-8">
<style>

input,
canvas {
  position: absolute;
}

input {
  background: transparent;
  border: none;
  margin: 10px 384px;
  width: 180px;
  font-size: 18px;
  padding: 6px;
  text-align: center;
}

</style>
<!-- <input autofocus maxlength=5 placeholder="type a zipcode"> -->
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var width = 960,
    height = 500;

var projection = d3.geo.albersUsa()
    .scale(1000)
    .translate([width / 2, height / 2]);

d3.json("bin/zips.json", function(error, zipcodes) {
  zips = zipcodes
  var zip0;

  // Compute projected locations of each zipcode.
  zipcodes.forEach(function(d) {
    var p = projection([+d.lon, +d.lat]);
    if (p) d.x = Math.round(p[0]), d.y = Math.round(p[1]);
  });


  change();

  function change() {

    // Select old canvases to remove after fade.
    var canvas0 = d3.selectAll("canvas");

    var canvas1 = d3.select("body").insert("canvas", "input")
        .attr("width", width)
        .attr("height", height)
        .style("opacity", 1);

    var context = canvas1.node().getContext("2d");
    context.fillStyle = "#fff";
    context.fillRect(0, 0, width, height);

    // Render the active zipcodes.
    context.globalAlpha = 1;
    context.fillStyle = "#555";
    zipcodes.forEach(function(d) {
      if (!d.mlb) context.fillRect(d.x, d.y, 3, 3)
      //context.fillRect(d.x, d.y, d.mlb.length, d.mlb.length);
    });

  }
});

</script>
